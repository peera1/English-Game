<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>משחק התאמת מילים - מגדל המילים</title>
    <style>
        body {
            font-family: 'Comic Sans MS', Arial, 'Noto Sans Hebrew', sans-serif;
            background: linear-gradient(to bottom, #87ceeb, #1e90ff);
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            margin: 0;
            padding: 10px;
            overflow: hidden;
            position: relative;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 15px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 900px;
            text-align: center;
            position: relative;
            z-index: 1;
            box-sizing: border-box;
            height: 90vh;
            overflow: hidden;
        }

        h1 {
            color: #ff5722;
            font-size: 2em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        #tower {
            position: relative;
            height: 70vh;
            overflow-y: auto;
            overflow-x: hidden;
            background: linear-gradient(to bottom, #e0f7fa, #b0e0e6);
            border-radius: 10px;
            padding: 10px;
            transition: all 0.5s ease;
        }

        .platform {
            position: absolute;
            width: 40%;
            background: #4caf50;
            color: white;
            padding: 8px;
            border-radius: 5px;
础            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s;
            z-index: 2;
        }

        .platform:hover {
            transform: scale(1.05);
        }

        .platform.selected {
            background: #ff9800;
        }

        .platform.matched {
            background: #ffeb3b;
            color: #333;
        }

        #player {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            background: url('https://img.icons8.com/emoji/48/000000/boy.png') no-repeat center;
            background-size: contain;
            transition: all 0.3s ease;
            z-index: 3;
        }

        #score {
            font-size: 1.3em;
            color: #d81b60;
            margin: 10px 0;
        }

        #height {
            font-size: 1.2em;
            color: #2196f3;
            margin-bottom: 10px;
        }

        #combo {
            font-size: 1.2em;
            color: #ff9800;
            margin-bottom: 10px;
            display: none;
        }

        #result {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #ffeb3b, #ff5722);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.4);
            text-align: center;
            width: 90%;
            max-width: 700px;
            z-index: 4;
            animation: popIn 0.5s ease-out;
        }

        @keyframes popIn {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            80% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        #result h2 {
            color: #fff;
            font-size: 2em;
            margin-bottom: 15px;
        }

        #play-again {
            padding: 8px 16px;
            font-size: 1.1em;
            color: #fff;
            background: #4caf50;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s, background 0.3s;
        }

        #play-again:hover {
            background: #45a049;
            transform: scale(1.1);
        }

        .confetti {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #ff0000;
            animation: fall 2s linear;
            z-index: 0;
        }

        @keyframes fall {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        @media (min-width: 768px) {
            h1 { font-size: 2.5em; }
            .platform { font-size: 1.2em; }
            #score { font-size: 1.5em; }
            #height { font-size: 1.4em; }
            #combo { font-size: 1.3em; }
            #play-again { padding: 10px 20px; font-size: 1.2em; }
            #result h2 { font-size: 2.5em; }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>מגדל המילים</h1>
        <div id="score">ניקוד: 0</div>
        <div id="height">גובה: 0 מטר</div>
        <div id="combo"></div>
        <div id="tower">
            <div id="player"></div>
        </div>
    </div>
    <div id="result">
        <h2>כל הכבוד! 🎉</h2>
        <p>ניקוד סופי: <span id="final-score"></span></p>
        <p>גובה מרבי: <span id="max-height"></span> מטר</p>
        <p>זמן כולל: <span id="total-time"></span> שניות</p>
        <p>רצף מרבי: <span id="max-combo"></span></p>
        <button id="play-again">שחק שוב</button>
    </div>

    <script>
const words = [
    { hebrew: "חתול", english: "Cat" },
    { hebrew: "דג", english: "Fish" },
    { hebrew: "ציפור", english: "Bird" },
    { hebrew: "אריה", english: "Lion" },
    { hebrew: "פיל", english: "Elephant" },
    { hebrew: "סוס", english: "Horse" },
    { hebrew: "פרה", english: "Cow" },
    { hebrew: "תרנגולת", english: "Chicken" },
    { hebrew: "ברווז", english: "Duck" },
    { hebrew: "עכבר", english: "Mouse" },
    { hebrew: "כלב", english: "Dog" },
    { hebrew: "נמר", english: "Tiger" },
    { hebrew: "זאב", english: "Wolf" },
    { hebrew: "שועל", english: "Fox" },
    { hebrew: "חמור", english: "Donkey" },
    { hebrew: "עז", english: "Goat" },
    { hebrew: "כבש", english: "Sheep" },
    { hebrew: "חזיר", english: "Pig" },
    { hebrew: "צב", english: "Turtle" },
    { hebrew: "נחש", english: "Snake" },
    { hebrew: "תנין", english: "Crocodile" },
    { hebrew: "קוף", english: "Monkey" },
    { hebrew: "גמל", english: "Camel" },
    { hebrew: "דב", english: "Bear" },
    { hebrew: "עטלף", english: "Bat" },
    { hebrew: "ארנב", english: "Rabbit" },
    { hebrew: "סנאי", english: "Squirrel" },
    { hebrew: "צפרדע", english: "Frog" },
    { hebrew: "פרפר", english: "Butterfly" },
    { hebrew: "דבורה", english: "Bee" },
    { hebrew: "נמלה", english: "Ant" },
    { hebrew: "זבוב", english: "Fly" },
    { hebrew: "יתוש", english: "Mosquito" },
    { hebrew: "עכביש", english: "Spider" },
    { hebrew: "תולעת", english: "Worm" },
    { hebrew: "חיפושית", english: "Beetle" },
    { hebrew: "שמש", english: "Sun" },
    { hebrew: "ירח", english: "Moon" },
    { hebrew: "כוכב", english: "Star" },
    { hebrew: "ענן", english: "Cloud" },
    { hebrew: "גשם", english: "Rain" },
    { hebrew: "שלג", english: "Snow" },
    { hebrew: "רוח", english: "Wind" },
    { hebrew: "ים", english: "Sea" },
    { hebrew: "נהר", english: "River" },
    { hebrew: "אגם", english: "Lake" },
    { hebrew: "הר", english: "Mountain" },
    { hebrew: "יער", english: "Forest" },
    { hebrew: "שדה", english: "Field" },
    { hebrew: "פרח", english: "Flower" },
    { hebrew: "עץ", english: "Tree" },
    { hebrew: "שולחן", english: "Table" },
    { hebrew: "כיסא", english: "Chair" },
    { hebrew: "מיטה", english: "Bed" },
    { hebrew: "חלון", english: "Window" },
    { hebrew: "דלת", english: "Door" },
    { hebrew: "בית", english: "House" },
    { hebrew: "מכונית", english: "Car" },
    { hebrew: "אופניים", english: "Bicycle" },
    { hebrew: "אוטובוס", english: "Bus" },
    { hebrew: "רכבת", english: "Train" },
    { hebrew: "מטוס", english: "Airplane" },
    { hebrew: "סירה", english: "Boat" },
    { hebrew: "כדור", english: "Ball" },
    { hebrew: "ספר", english: "Book" },
    { hebrew: "עיפרון", english: "Pencil" },
    { hebrew: "מחברת", english: "Notebook" },
    { hebrew: "תיק", english: "Bag" },
    { hebrew: "שעון", english: "Clock" },
    { hebrew: "טלפון", english: "Phone" },
    { hebrew: "מחשב", english: "Computer" },
    { hebrew: "טלוויזיה", english: "Television" },
    { hebrew: "מקרר", english: "Refrigerator" },
    { hebrew: "תנור", english: "Oven" },
    { hebrew: "כוס", english: "Cup" },
    { hebrew: "צלחת", english: "Plate" },
    { hebrew: "סכין", english: "Knife" },
    { hebrew: "מזלג", english: "Fork" },
    { hebrew: "כף", english: "Spoon" },
    { hebrew: "לחם", english: "Bread" },
    { hebrew: "גבינה", english: "Cheese" },
    { hebrew: "חלב", english: "Milk" },
    { hebrew: "מיץ", english: "Juice" },
    { hebrew: "תפוח", english: "Apple" },
    { hebrew: "בננה", english: "Banana" },
    { hebrew: "תפוז", english: "Orange" },
    { hebrew: "ענבים", english: "Grapes" },
    { hebrew: "מלון", english: "Melon" },
    { hebrew: "אבטיח", english: "Watermelon" },
    { hebrew: "עגבנייה", english: "Tomato" },
    { hebrew: "מלפפון", english: "Cucumber" },
    { hebrew: "גזר", english: "Carrot" },
    { hebrew: "תפוד", english: "Potato" },
    { hebrew: "בצל", english: "Onion" },
    { hebrew: "שום", english: "Garlic" },
    { hebrew: "מלח", english: "Salt" },
    { hebrew: "פלפל", english: "Pepper" },
    { hebrew: "סוכר", english: "Sugar" },
    { hebrew: "שוקולד", english: "Chocolate" }
];

        const tower = document.getElementById('tower');
        const player = document.getElementById('player');
        const scoreDisplay = document.getElementById('score');
        const heightDisplay = document.getElementById('height');
        const comboDisplay = document.getElementById('combo');
        const resultDiv = document.getElementById('result');
        const finalScoreDisplay = document.getElementById('final-score');
        const maxHeightDisplay = document.getElementById('max-height');
        const totalTimeDisplay = document.getElementById('total-time');
        const maxComboDisplay = document.getElementById('max-combo');
        const playAgainButton = document.getElementById('play-again');

        let score = 0;
        let height = 0;
        let combo = 0;
        let maxCombo = 0;
        let platforms = [];
        let selectedHebrew = null;
        let selectedEnglish = null;
        let startTime = null;
        let lastMatchTime = null;
        let gameInterval = null;
        let playerY = 20;
        let velocity = 0;
        const gravity = 0.5;
        const jumpPower = 15;
        const platformSpeed = 1;

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function initGame() {
            score = 0;
            height = 0;
            combo = 0;
            maxCombo = 0;
            platforms = [];
            selectedHebrew = null;
            selectedEnglish = null;
            startTime = Date.now();
            lastMatchTime = null;
            playerY = 20;
            velocity = 0;
            scoreDisplay.textContent = `ניקוד: ${score}`;
            heightDisplay.textContent = `גובה: ${height} מטר`;
            comboDisplay.style.display = 'none';
            resultDiv.style.display = 'none';
            tower.innerHTML = '<div id="player"></div>';

            generateInitialPlatforms();
            if (gameInterval) clearInterval(gameInterval);
            gameInterval = setInterval(updateGame, 1000 / 60);
        }

        function generateInitialPlatforms() {
            const shuffledWords = shuffle([...words]).slice(0, 10);
            generatePlatforms(shuffledWords, 0);
        }

        function generatePlatforms(wordList, startHeight) {
            const towerHeight = tower.clientHeight;
            wordList.forEach((word, index) => {
                const hebrewPlatform = document.createElement('div');
                hebrewPlatform.className = 'platform';
                hebrewPlatform.textContent = word.hebrew;
                hebrewPlatform.dataset.english = word.english;
                hebrewPlatform.style.left = '5%';
                hebrewPlatform.style.bottom = `${startHeight + 50 + index * 100}px`;
                hebrewPlatform.addEventListener('click', () => selectPlatform(hebrewPlatform, 'hebrew'));

                const englishPlatform = document.createElement('div');
                englishPlatform.className = 'platform';
                englishPlatform.textContent = word.english;
                englishPlatform.dataset.english = word.english;
                englishPlatform.style.right = '5%';
                englishPlatform.style.bottom = `${startHeight + 50 + index * 100 + 50}px`;
                englishPlatform.addEventListener('click', () => selectPlatform(englishPlatform, 'english'));

                tower.appendChild(hebrewPlatform);
                tower.appendChild(englishPlatform);
                platforms.push(hebrewPlatform, englishPlatform);
            });
        }

        function selectPlatform(element, type) {
            if (type === 'hebrew') {
                if (selectedHebrew) selectedHebrew.classList.remove('selected');
                selectedHebrew = element;
                selectedHebrew.classList.add('selected');
            } else {
                if (selectedEnglish) selectedEnglish.classList.remove('selected');
                selectedEnglish = element;
                selectedEnglish.classList.add('selected');
            }

            if (selectedHebrew && selectedEnglish) {
                checkMatch();
            }
        }

        function checkMatch() {
            const currentTime = Date.now();
            const timeSinceLastMatch = lastMatchTime ? (currentTime - lastMatchTime) / 1000 : 999;

            if (selectedHebrew.dataset.english === selectedEnglish.dataset.english) {
                score += 10 + combo * 5; // בונוס לרצף
                height += 5;
                combo = timeSinceLastMatch < 3 ? combo + 1 : 1; // רצף נמשך אם פחות מ-3 שניות
                maxCombo = Math.max(maxCombo, combo);
                scoreDisplay.textContent = `ניקוד: ${score}`;
                heightDisplay.textContent = `גובה: ${height} מטר`;

                if (combo > 1) {
                    comboDisplay.textContent = `רצף: x${combo} 🔥`;
                    comboDisplay.style.display = 'block';
                    playComboSound(combo);
                } else {
                    comboDisplay.style.display = 'none';
                }

                selectedHebrew.classList.add('matched');
                selectedEnglish.classList.add('matched');
                selectedHebrew.style.pointerEvents = 'none';
                selectedEnglish.style.pointerEvents = 'none';

                velocity = jumpPower;
                addConfetti();
                lastMatchTime = currentTime;

                setTimeout(() => {
                    platforms = platforms.filter(p => p !== selectedHebrew && p !== selectedEnglish);
                    selectedHebrew.remove();
                    selectedEnglish.remove();
                }, 500);
            } else {
                score -= 5;
                combo = 0;
                comboDisplay.style.display = 'none';
                scoreDisplay.textContent = `ניקוד: ${score}`;
                alert('אופס! נסה שוב!');
            }

            selectedHebrew.classList.remove('selected');
            selectedEnglish.classList.remove('selected');
            selectedHebrew = null;
            selectedEnglish = null;
        }

        function playComboSound(combo) {
            const utterance = new SpeechSynthesisUtterance(combo > 3 ? "מדהים!" : "כל הכבוד!");
            utterance.lang = 'he-IL';
            utterance.rate = 1.2;
            window.speechSynthesis.speak(utterance);
        }

        function updateGame() {
            // עדכון תנועת השחקן
            velocity -= gravity;
            playerY += velocity;
            if (playerY < 20) {
                playerY = 20;
                velocity = 0;
            }
            player.style.bottom = `${playerY}px`;

            // גלילה של המגדל
            const towerBottom = parseInt(tower.scrollTop);
            const playerScreenY = playerY + towerBottom;
            if (playerScreenY > tower.clientHeight * 0.7) {
                tower.scrollTop += playerScreenY - tower.clientHeight * 0.7;
            }

            // סיום משחק אם השחקן נופל
            if (playerScreenY < -50) {
                endGame();
            }

            // הזזת פלטפורמות והוספת חדשות
            platforms.forEach(platform => {
                const bottom = parseInt(platform.style.bottom) - platformSpeed;
                platform.style.bottom = `${bottom}px`;
                if (bottom < -50) {
                    platform.remove();
                    platforms = platforms.filter(p => p !== platform);
                }
            });

            // יצירת פלטפורמות חדשות כשאין מספיק
            if (platforms.length < 10) {
                const newWords = shuffle([...words]).slice(0, 5);
                generatePlatforms(newWords, tower.scrollTop + tower.clientHeight);
            }
        }

        function addConfetti() {
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.background = `hsl(${Math.random() * 360}, 100%, 50%)`;
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 2000);
            }
        }

        function endGame() {
            clearInterval(gameInterval);
            const totalTime = (Date.now() - startTime) / 1000;
            resultDiv.style.display = 'block';
            finalScoreDisplay.textContent = score;
            maxHeightDisplay.textContent = height;
            totalTimeDisplay.textContent = totalTime.toFixed(1);
            maxComboDisplay.textContent = maxCombo;
        }

        playAgainButton.addEventListener('click', initGame);

        initGame();
    </script>
</body>
</html>
